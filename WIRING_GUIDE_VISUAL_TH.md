# 🎨 คู่มือการต่อสายแบบภาพ - ระบบ Air Quality AI

## 🔌 Hardware Diagram - วงจรรวมทั้งหมด

### 📐 แผนผังวงจรแบบสมบูรณ์ - เฉพาะ Pin ที่ใช้งาน

```
🌟 AIR QUALITY AI SYSTEM - ESSENTIAL PINS CIRCUIT DIAGRAM 🌟

┌═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════┐
║                                            NVIDIA JETSON NANO 4GB                                                ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ GPIO Header (เฉพาะ Pin ที่ใช้):                                                                             │ ║
║  │                                                                                                             │ ║
║  │  Pin 2: ●2●5V ◄── 🔴 Power Output (4A MAX, 5.0V±0.1V)                                                     │ ║
║  │  Pin 6: ●6●GND ◄── ⚫ Ground Reference (0V)                                                                 │ ║
║  │                                                                                                             │ ║
║  │  Power Supply: 5V/4A (USB-C หรือ Barrel Connector)                                                         │ ║
║  │  USB Ports: 4x USB-A 3.0 (สำหรับ ESP32 Communication)                                                      │ ║
║  └─────────────────┬─────────────────────┬─────────────────────────────────────────────────────────────────────┘ ║
║                   │ Pin 2: 5V OUT       │ Pin 6: GND                                                           ║
║                   🔴                    ⚫                                                                        ║
╚═══════════════════┼═════════════════════┼══════════════════════════════════════════════════════════════════════════╝
                    │                     │
                    │ 🔴 5V Power         │ ⚫ Ground
                    │ Wire: Red 22AWG     │ Wire: Black 22AWG
                    ▼                     ▼
┌═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════┐
║                                    BREADBOARD POWER SUPPLY MODULE                                                ║
║  Model: MB102 | Input: 5V-12V | Output: 3.3V/5V (700mA each) | LDO: AMS1117-3.3                               ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ INPUT                            │                OUTPUT RAILS                                              │ ║
║  │ ┌─────────────┐                  │  ┌─────────────────────────────────────────────────────────────────────┐ │ ║
║  │ │ VIN(+) ◄────┼──────────────────┼──┤ 5V Rail    GND Rail   3.3V Rail                                   │ │ ║
║  │ │ GND(-) ◄────┼──────────────────┼──┤  ●●●        ●●●        ●●●                                        │ │ ║
║  │ │ ●GREEN LED● │ ◄── Power Status │  │  │││        │││        │││                                        │ │ ║
║  │ └─────────────┘                  │  └──┼┼┼────────┼┼┼────────┼┼┼────────────────────────────────────────┘ │ ║
║  └──────────────────────────────────┼─────┼┼┼────────┼┼┼────────┼┼┼──────────────────────────────────────────┘ ║
╚═══════════════════════════════════════════┼┼┼════════┼┼┼════════┼┼┼════════════════════════════════════════════════╝
                                            │││        │││        │││
                                            🔴🔴🔴      ⚫⚫⚫      🔴🔴🔴
                                            │││        │││        │││
                    ┌───────────────────────┘││        │││        │││
                    │                ┌───────┘│        │││        │││
                    │                │    ┌───┘        │││        │││
                    │                │    │    ┌───────┘││        │││
                    │                │    │    │    ┌───┘│        │││
                    │                │    │    │    │    │        │││
┌═══════════════════▼════════════════▼════▼════▼════▼════▼════════▼▼▼═══════════════════════════════════════════════┐
║                                         ESP32 WROOM-32 BOARD                                                    ║
║  Dual-Core 32-bit | 4MB Flash | 520KB RAM | WiFi 802.11 b/g/n | Bluetooth v4.2                                ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ เฉพาะ PINS ที่ใช้งาน:                                                                                       │ ║
║  │                                                                                                             │ ║
║  │ TOP ROW:                                                                                                    │ ║
║  │ VIN● ◄── 🔴 5V Power Input (จาก Power Module 5V Rail)                                                      │ ║
║  │ GND● ◄── ⚫ Ground (จาก Power Module GND Rail)                                                              │ ║
║  │                                                                                                             │ ║
║  │ BOTTOM ROW:                                                                                                 │ ║
║  │ D4●  ◄── 🟡 DHT22 Data Signal (GPIO4, ADC2_CH0, Touch0)                                                   │ ║
║  │ D16● ◄── 🟢 PM2.5 UART TX (GPIO16, UART2_RX)                                                              │ ║
║  │ D17● ◄── ⚪ PM2.5 UART RX (GPIO17, UART2_TX)                                                              │ ║
║  │                                                                                                             │ ║
║  │ SIDE PINS:                                                                                                  │ ║
║  │ D36● ◄── 🔵 MQ-135 Analog Input (GPIO36, ADC1_CH0, Input Only)                                            │ ║
║  │                                                                                                             │ ║
║  │ USB PORT: Micro USB-B ◄── Programming + Serial Communication                                               │ ║
║  └─┬───┬───┬───┬─────────────────────────────────────────────────────────────────────────────────────────────┘ ║
║    │   │   │   │                                                                                               ║
║    │   │   🟡  🔵                                                                                               ║
║    │   │   │   │                                                                                               ║
║    │   │   │   │                    ┌────────────────────────────────────────────────────────────────────┐   ║
║    │   │   │   │                    │                    USB CABLE                                       │   ║
║    │   │   │   │                    │  Micro USB ↔ USB-A | Programming + Data Transfer                  │   ║
║    │   │   │   │                    └────────────────┬───────────────────────────────────────────────────┘   ║
║    │   │   │   │                                     │                                                       ║
║    │   │   🟢  ⚪                                     │ USB Communication                                     ║
║    │   │   │   │                                     ▼                                                       ║
╚════┼═══┼═══┼═══┼═════════════════════════════════════════════════════════════════════════════════════════════════╝
     │   │   │   │                    ┌────────────────────────────────────────────────────────────────────┐
     │   │   │   │                    │                JETSON NANO USB PORT                               │
     │   │   │   │                    │  Device: /dev/ttyUSB0 หรือ /dev/ttyACM0                           │
     │   │   │   │                    └────────────────────────────────────────────────────────────────────┘
     │   │   │   │
┌════▼═══▼═══▼═══┼═══════════════════════════════════════════════════════════════════════════════════════════════┐
║                │                                DHT22 SENSOR                                                   ║
║                │                           TEMPERATURE & HUMIDITY                                              ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ Model: DHT22/AM2302 | ±0.5°C, ±2%RH | -40~80°C, 0~100%RH | 1-Wire Protocol | 2 sec Update             │ ║
║  │                                                                                                         │ ║
║  │ PIN CONFIGURATION:                                                                                      │ ║
║  │ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                                                                        │ ║
║  │ │Pin1 │ │Pin2 │ │Pin3 │ │Pin4 │                                                                        │ ║
║  │ │ VCC │ │DATA │ │ NC  │ │ GND │                                                                        │ ║
║  │ └──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘                                                                        │ ║
║  │    🔴     🟡     │     ⚫                                                                              │ ║
║  │    │      │      │     │                                                                              │ ║
║  │    │      │      │     │ (No Connection)                                                              │ ║
║  │    │      │                                                                                           │ ║
║  │    │      └──────┐                                                                                    │ ║
║  │    │             │                                                                                    │ ║
║  │    │    ┌────────▼────────┐ ◄── PULL-UP RESISTOR (Optional แต่แนะนำ)                                │ ║
║  │    │    │                 │                                                                          │ ║
║  │    └────┤    10kΩ         │ ◄── ตัวต้านทาน 10kΩ (1/4W, ±5%)                                        │ ║
║  │         │   Resistor      │     - ช่วยให้สัญญาณเสถียร                                               │ ║
║  │         │                 │     - ป้องกัน Floating Signal                                           │ ║
║  │         └─────────────────┘     - ลด Noise และ Interference                                         │ ║
║  └────┼──────┼──────┼─────┼──────────────────────────────────────────────────────────────────────────────┘ ║
║       │      │      │     │                                                                                ║
╚═══════┼══════┼══════┼═════┼════════════════════════════════════════════════════════════════════════════════╝
        │      │      │     │
┌═══════▼══════▼══════▼═════▼════════════════════════════════════════════════════════════════════════════════════┐
║                                                PM2.5 SENSOR                                                    ║
║                                           PARTICULATE MATTER                                                   ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ Model: PM2.5 Module | PM1.0, PM2.5, PM10 | Laser Scattering | UART 9600 | 10-byte | 1 sec Update      │ ║
║  │                                                                                                         │ ║
║  │ PIN CONFIGURATION (เฉพาะที่ใช้):                                                                        │ ║
║  │ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                                                                        │ ║
║  │ │ TXD │ │ RXD │ │ GND │ │ 5V  │                                                                        │ ║
║  │ └──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘                                                                        │ ║
║  │    ⚪     🟢     ⚫     🔴                                                                              │ ║
║  │    │      │      │      │                                                                              │ ║
║  │    │      │      │      │                                                                              │ ║
║  └────┼──────┼──────┼──────┼──────────────────────────────────────────────────────────────────────────────┘ ║
║       │      │      │      │                                                                                ║
║       │      │      │      │ (Pins: 25μm, 1μm, NC = ไม่ต่อ)                                              ║
╚═══════┼══════┼══════┼══════┼════════════════════════════════════════════════════════════════════════════════════╝
        │      │      │      │
┌═══════▼══════▼══════▼══════▼════════════════════════════════════════════════════════════════════════════════════┐
║                                               MQ-135 GAS SENSOR                                                ║
║                                            AIR QUALITY DETECTION                                              ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │ Model: MQ-135 | NH3, NOx, CO2, Benzene | SnO2 Semiconductor | 0-3.3V Analog | 12-bit ADC | 24-48hr Heat │ ║
║  │                                                                                                         │ ║
║  │ PIN CONFIGURATION (เฉพาะที่ใช้):                                                                        │ ║
║  │ ┌─────┐ ┌─────┐ ┌──────┐                                                                               │ ║
║  │ │ VCC │ │ GND │ │ AOUT │                                                                               │ ║
║  │ └──┬──┘ └──┬──┘ └───┬──┘                                                                               │ ║
║  │    🔴     ⚫      🔵                                                                                   │ ║
║  │    │      │       │                                                                                   │ ║
║  │    │      │       │ (DOUT = ไม่ใช้)                                                                  │ ║
║  └────┼──────┼───────┼───────────────────────────────────────────────────────────────────────────────────┘ ║
║       │      │       │                                                                                     ║
╚═══════┼══════┼═══════┼═════════════════════════════════════════════════════════════════════════════════════════╝
        │      │       │
┌═══════▼══════▼═══════▼═════════════════════════════════════════════════════════════════════════════════════════┐
║                                         POWER & SIGNAL SUMMARY                                                 ║
║                                                                                                                ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                                    POWER DISTRIBUTION                                                   │ ║
║  │                                                                                                         │ ║
║  │ 5V RAIL (700mA MAX):                                                                                   │ ║
║  │ ████████████████████████████████████████████████████████████████████████████████████████████████████   │ ║
║  │ ├── ESP32 VIN (500mA) → Internal LDO → 3.3V ESP32 Core                                               │ ║
║  │ └── PM2.5 Sensor (100mA) → Laser + Fan Motor                                                          │ ║
║  │ Total: 600mA ✅                                                                                        │ ║
║  │                                                                                                         │ ║
║  │ 3.3V RAIL (700mA MAX):                                                                                 │ ║
║  │ ████████████████████████████████████████████████████████████████████████████████████████████████████   │ ║
║  │ ├── DHT22 VCC (2mA) → Temperature/Humidity Sensor                                                     │ ║
║  │ └── MQ-135 VCC (150mA) → Gas Sensor Heating Element                                                   │ ║
║  │ Total: 152mA ✅                                                                                        │ ║
║  │                                                                                                         │ ║
║  │ GND RAIL (Common Ground):                                                                              │ ║
║  │ ████████████████████████████████████████████████████████████████████████████████████████████████████   │ ║
║  │ All components connected to common ground reference                                                    │ ║
║  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ ║
║                                                                                                                ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                                    SIGNAL CONNECTIONS                                                   │ ║
║  │                                                                                                         │ ║
║  │ GPIO4 (DHT22): 🟡 One-Wire Digital | 40-bit Data | 2 sec Update                                       │ ║
║  │ └── Pull-up Resistor: 10kΩ (3.3V ──[10kΩ]── GPIO4) ◄── แนะนำให้ใช้                                │ ║
║  │                                                                                                         │ ║
║  │ GPIO16 (PM2.5 TX): 🟢 UART 9600 bps | ESP32→Sensor Commands                                           │ ║
║  │ └── No External Resistor Required (Internal Pull-up Available)                                        │ ║
║  │                                                                                                         │ ║
║  │ GPIO17 (PM2.5 RX): ⚪ UART 9600 bps | Sensor→ESP32 Data (10 bytes)                                   │ ║
║  │ └── No External Resistor Required (Internal Pull-up Available)                                        │ ║
║  │                                                                                                         │ ║
║  │ GPIO36 (MQ-135): 🔵 12-bit ADC | 0-3.3V Analog | Gas Concentration                                   │ ║
║  │ └── No Resistor Required (Direct Analog Input, Input-Only Pin)                                        │ ║
║  │                                                                                                         │ ║
║  │ USB (Programming): Micro USB | Serial Monitor | Code Upload                                            │ ║
║  │ └── Built-in USB-to-Serial Chip (CP2102/CH340) with Internal Resistors                               │ ║
║  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝

                                    ┌─────────────────────────────────────┐
                                    │            SYSTEM SPECS             │
                                    │                                     │
                                    │ Power: 5V/4A (Jetson) + Sensors    │
                                    │ Total Consumption: ~12-15W          │
                                    │ Active Pins: 6 (VIN,GND,4,16,17,36)│
                                    │ Sensors: 3 Types (Temp,Gas,PM)     │
                                    │ Communication: USB + UART + 1-Wire  │
                                    │ Update Rate: 1-2 seconds            │
                                    │ Resistors: 1x 10kΩ (DHT22 Pull-up) │
                                    │                                     │
                                    └─────────────────────────────────────┘

┌═════════════════════════════════════════════════════════════════════════════════════════════════════════════════┐
║                                        RESISTOR USAGE GUIDE                                                     ║
╠═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║                                                                                                                 ║
║  🔧 REQUIRED RESISTOR:                                                                                          ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                                DHT22 PULL-UP RESISTOR                                                   │ ║
║  │                                                                                                         │ ║
║  │  Value: 10kΩ (10,000 Ohms)                                                                             │ ║
║  │  Type: Carbon Film Resistor, 1/4W, ±5% Tolerance                                                       │ ║
║  │  Color Code: Brown-Black-Orange-Gold                                                                    │ ║
║  │                                                                                                         │ ║
║  │  Connection Diagram:                                                                                    │ ║
║  │  ┌─────────────────────────────────────────────────────────────────────────────────────────────────┐ │ ║
║  │  │                                                                                                 │ │ ║
║  │  │  3.3V Rail ────┬─────────────────────── DHT22 Pin 1 (VCC)                                     │ │ ║
║  │  │                │                                                                               │ │ ║
║  │  │                │                                                                               │ │ ║
║  │  │                └─── [10kΩ] ─────┬───── DHT22 Pin 2 (DATA) ──── ESP32 GPIO4                  │ │ ║
║  │  │                                 │                                                             │ │ ║
║  │  │                                 │                                                             │ │ ║
║  │  │  GND Rail ──────────────────────┼───── DHT22 Pin 4 (GND)                                     │ │ ║
║  │  │                                 │                                                             │ │ ║
║  │  │                                 │ ◄── Pull-up ช่วยให้สัญญาณ Digital เสถียร                   │ │ ║
║  │  └─────────────────────────────────────────────────────────────────────────────────────────────────┘ │ ║
║  │                                                                                                         │ ║
║  │  Purpose:                                                                                               │ ║
║  │  ✅ ป้องกัน Floating Signal - เมื่อ DHT22 ไม่ส่งข้อมูล                                               │ ║
║  │  ✅ เสถียรภาพสัญญาณ - ลด Noise และ Interference                                                       │ ║
║  │  ✅ ความเร็วการตอบสนอง - ช่วยให้ Signal Rise Time เร็วขึ้น                                            │ ║
║  │  ✅ ความน่าเชื่อถือ - ลดโอกาสอ่านค่าผิดพลาด                                                           │ ║
║  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ ║
║                                                                                                                 ║
║  🔧 NO RESISTOR REQUIRED:                                                                                       ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                                                                                                         │ ║
║  │  PM2.5 Sensor (GPIO16, GPIO17):                                                                        │ ║
║  │  ├── UART Communication มี Built-in Pull-up Resistors                                                  │ ║
║  │  ├── ESP32 Internal Pull-up สามารถใช้งานได้                                                           │ ║
║  │  └── External Resistor ไม่จำเป็น                                                                       │ ║
║  │                                                                                                         │ ║
║  │  MQ-135 Gas Sensor (GPIO36):                                                                           │ ║
║  │  ├── Analog Input - รับสัญญาณ 0-3.3V โดยตรง                                                          │ ║
║  │  ├── GPIO36 เป็น Input-Only Pin                                                                        │ ║
║  │  ├── Built-in ADC ไม่ต้องใช้ External Components                                                       │ ║
║  │  └── Pull-up/Pull-down Resistor ไม่จำเป็น                                                             │ ║
║  │                                                                                                         │ ║
║  │  Power Lines (VIN, GND):                                                                               │ ║
║  │  ├── DC Power Supply - ไม่ต้องใช้ Resistor                                                             │ ║
║  │  ├── Current Limiting ทำโดย Power Module                                                               │ ║
║  │  └── Over-current Protection ในตัว ESP32                                                               │ ║
║  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ ║
║                                                                                                                 ║
║  📋 RESISTOR SHOPPING LIST:                                                                                     ║
║  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐ ║
║  │                                                                                                         │ ║
║  │  Required: 1x 10kΩ Resistor                                                                            │ ║
║  │  ├── Value: 10,000 Ohms (10kΩ)                                                                         │ ║
║  │  ├── Power Rating: 1/4W (0.25W) หรือสูงกว่า                                                           │ ║
║  │  ├── Tolerance: ±5% (Gold Band) หรือดีกว่า                                                             │ ║
║  │  ├── Type: Carbon Film หรือ Metal Film                                                                 │ ║
║  │  ├── Color Code: Brown-Black-Orange-Gold                                                               │ ║
║  │  └── Price: ~1-5 บาท (ซื้อเป็นชุด 100 ตัว คุ้มกว่า)                                                  │ ║
║  │                                                                                                         │ ║
║  │  Optional (สำรอง): 5x 10kΩ Resistors                                                                   │ ║
║  │  └── เผื่อใช้ในอนาคต หรือกรณีเสียหาย                                                                   │ ║
║  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘ ║
╚═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
```

### 🔌 สรุปการเชื่อมต่อทั้งหมด

#### ⚡ **Power Distribution Network**
```
JETSON NANO Pin 2 (5V) ──🔴──► POWER MODULE VIN
                                      │
                              ┌───────▼───────┐
                              │ POWER MODULE  │
                              │ ┌───────────┐ │
                              │ │ 5V  3.3V  │ │ ◄── Output Rails
                              │ └─┬─────┬───┘ │
                              └───┼─────┼─────┘
                                  │     │
            ┌─────────────────────┘     └─────────────────────┐
            ▼                                                 ▼
    ┌──────────────┐                                 ┌──────────────┐
    │   5V RAIL    │                                 │  3.3V RAIL   │
    │ ┌──────────┐ │                                 │ ┌──────────┐ │
    │ │ ESP32    │ │                                 │ │ DHT22    │ │
    │ │ VIN      │ │                                 │ │ VCC      │ │
    │ └──────────┘ │                                 │ └──────────┘ │
    │ ┌──────────┐ │                                 │ ┌──────────┐ │
    │ │ PM2.5    │ │                                 │ │ MQ-135   │ │
    │ │ 5V       │ │                                 │ │ VCC      │ │
    │ └──────────┘ │                                 │ └──────────┘ │
    └──────────────┘                                 └──────────────┘

JETSON NANO Pin 6 (GND) ──⚫──► POWER MODULE GND
                                      │
                              ┌───────▼───────┐
                              │   GND RAIL    │
                              │ ┌───────────┐ │
                              │ │ ESP32 GND │ │
                              │ │ DHT22 GND │ │
                              │ │ MQ135 GND │ │
                              │ │ PM2.5 GND │ │
                              │ └───────────┘ │
                              └───────────────┘
```

#### 📡 **Data Signal Routing**
```
ESP32 GPIO PINS ──► SENSOR CONNECTIONS

GPIO4  ──🟡──► DHT22 Pin 2 (Data Signal)
              │
              └─ Temperature & Humidity Data
                 Protocol: One-Wire Digital
                 Update Rate: 2 seconds

GPIO16 ──🟢──► PM2.5 Sensor RXD (UART2 TX)
              │
              └─ Command to PM2.5 Sensor
                 Protocol: UART Serial @ 9600 baud

GPIO17 ──⚪──► PM2.5 Sensor TXD (UART2 RX)
              │
              └─ PM2.5 & PM10 Data
                 Protocol: UART Serial @ 9600 baud
                 Data Format: 10-byte packets

GPIO36 ──🔵──► MQ-135 AOUT (ADC Input)
              │
              └─ Gas Level Analog Signal
                 Protocol: 0-3.3V Analog
                 Resolution: 12-bit (0-4095)
```

#### 💻 **USB Communication**
```
ESP32 Micro USB ═══════════════════► JETSON NANO USB-A
                                           │
                                           ▼
                                  Serial Communication
                                  - Programming ESP32
                                  - Data Transfer
                                  - Debugging
                                  Device: /dev/ttyUSB0
```

## 🌈 คู่มือการเชื่อมต่อแบบแยกสี

### มาตรฐานสีสายไฟ
```
🔴 แดง    = ไฟเลี้ยง (5V, 3.3V)
⚫ ดำ     = กราวด์ (GND, 0V)
🟡 เหลือง = สัญญาณข้อมูล DHT22
🟢 เขียว  = PM2.5 RX (รับข้อมูลแบบอนุกรม)
⚪ ขาว    = PM2.5 TX (ส่งข้อมูลแบบอนุกรม)
🔵 น้ำเงิน = เอาต์พุตอนาล็อก MQ-135
```

### 📋 **Pin Assignment Table**
```
┌─────────────────┬─────────────────┬─────────────────┬─────────────────┐
│    COMPONENT    │      PIN        │   ESP32 GPIO    │   WIRE COLOR    │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤
│ DHT22           │ Pin 1 (VCC)     │ 3.3V Rail       │ 🔴 Red          │
│ DHT22           │ Pin 2 (Data)    │ GPIO4           │ 🟡 Yellow       │
│ DHT22           │ Pin 3 (NC)      │ (No Connection) │ -               │
│ DHT22           │ Pin 4 (GND)     │ GND Rail        │ ⚫ Black        │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤
│ MQ-135          │ VCC             │ 3.3V Rail       │ 🔴 Red          │
│ MQ-135          │ GND             │ GND Rail        │ ⚫ Black        │
│ MQ-135          │ AOUT            │ GPIO36 (ADC)    │ 🔵 Blue         │
│ MQ-135          │ DOUT            │ (No Connection) │ -               │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤
│ PM2.5 Sensor    │ TXD             │ GPIO17 (RX2)    │ ⚪ White        │
│ PM2.5 Sensor    │ RXD             │ GPIO16 (TX2)    │ 🟢 Green        │
│ PM2.5 Sensor    │ GND             │ GND Rail        │ ⚫ Black        │
│ PM2.5 Sensor    │ 5V              │ 5V Rail         │ 🔴 Red          │
│ PM2.5 Sensor    │ 25μm,1μm,NC     │ (No Connection) │ -               │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤
│ ESP32           │ VIN             │ 5V Rail         │ 🔴 Red          │
│ ESP32           │ GND             │ GND Rail        │ ⚫ Black        │
│ ESP32           │ USB Port        │ Jetson USB      │ USB Cable       │
├─────────────────┼─────────────────┼─────────────────┼─────────────────┤
│ Power Module    │ VIN             │ Jetson Pin 2    │ 🔴 Red          │
│ Power Module    │ GND             │ Jetson Pin 6    │ ⚫ Black        │
└─────────────────┴─────────────────┴─────────────────┴─────────────────┘
```

### 🔋 **Power Consumption Analysis**
```
COMPONENT POWER REQUIREMENTS:

┌─────────────────┬─────────────┬─────────────┬─────────────┐
│   COMPONENT     │   VOLTAGE   │   CURRENT   │    POWER    │
├─────────────────┼─────────────┼─────────────┼─────────────┤
│ Jetson Nano     │ 5V          │ 2-4A        │ 10-20W      │
│ ESP32           │ 3.3V (5V)   │ 200-500mA   │ 1-2.5W      │
│ DHT22           │ 3.3V        │ 1-2mA       │ 3-7mW       │
│ MQ-135          │ 3.3V        │ 150-200mA   │ 500-660mW   │
│ PM2.5 Sensor    │ 5V          │ 100-200mA   │ 500mW-1W    │
│ Power Module    │ 5V          │ 50mA        │ 250mW       │
├─────────────────┼─────────────┼─────────────┼─────────────┤
│ TOTAL SYSTEM    │ 5V          │ 2.5-5A      │ 12.5-25W    │
└─────────────────┴─────────────┴─────────────┴─────────────┘

⚠️ Jetson Nano 4GB แนะนำ Power Supply: 5V/4A (20W) ขึ้นไป
```

### 🔌 **Power Supply ต่อ ESP32 - รายละเอียดแบบขั้นตอน**

#### 📐 **ESP32 Power Input Options**
```
ESP32 WROOM-32 Development Board มี 2 ทางเลือกในการจ่ายไฟ:

┌─────────────────────────────────────────────────────────────────────────────┐
│                        ESP32 POWER INPUT OPTIONS                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Option 1: VIN Pin (Recommended) ◄── 🔴 5V from Power Module               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ VIN Pin ──► LDO Regulator ──► 3.3V ──► ESP32 Core                  │    │
│  │  5V         (AMS1117-3.3)      3.3V     (CPU, WiFi, GPIO)          │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Option 2: 3V3 Pin (Direct) ◄── 🔴 3.3V from Power Module                 │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 3V3 Pin ──► ESP32 Core (Direct)                                    │    │
│  │  3.3V        (CPU, WiFi, GPIO)                                     │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

🎯 เราใช้ Option 1 (VIN Pin) เพราะ:
✅ เสถียรกว่า - LDO Regulator กรองไฟได้ดี
✅ ปลอดภัยกว่า - มี Over-voltage Protection
✅ ทนทานกว่า - รับไฟได้ 5V-12V
✅ มาตรฐาน - ตามคู่มือ ESP32 แนะนำ
```

#### ⚡ **Power Supply Module ไป ESP32 - ขั้นตอนละเอียด**

```
STEP-BY-STEP POWER CONNECTION:

Step 1: ระบุตำแหน่ง Power Rails บน Breadboard
┌─────────────────────────────────────────────────────────────────────────────┐
│                    BREADBOARD POWER SUPPLY MODULE                           │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  INPUT SECTION           │         OUTPUT RAILS                     │    │
│  │ ┌─────────────┐          │  ┌─────────────────────────────────────┐ │    │
│  │ │ VIN(+) ◄────┼──────────┼──┤ 5V   OFF   3.3V   5V   OFF   3.3V │ │    │
│  │ │ GND(-) ◄────┼──────────┼──┤ ●     ●     ●     ●     ●     ●   │ │    │
│  │ └─────────────┘          │  └─┬─────┬─────┬─────┬─────┬─────┬───┘ │    │
│  └──────────────────────────┼────┼─────┼─────┼─────┼─────┼─────┼─────┘    │
│                             │    │     │     │     │     │     │          │
│                             │    A     B     C     D     E     F          │
│                             │                                             │
└─────────────────────────────┼─────────────────────────────────────────────┘
                              │
                              └── เลือกใช้ Rail A (5V) และ Rail B (GND)

🔍 การระบุ Rails:
- Rail A: 5V Output (ด้านซ้าย)
- Rail B: GND Output (ด้านซ้าย) 
- Rail C: 3.3V Output (ด้านซ้าย)
- Rail D: 5V Output (ด้านขวา) - สำรอง
- Rail E: GND Output (ด้านขวา) - สำรอง  
- Rail F: 3.3V Output (ด้านขวา) - สำรอง
```

```
Step 2: เตรียมสายจัมเปอร์
┌─────────────────────────────────────────────────────────────────────────────┐
│                         JUMPER WIRE PREPARATION                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  สายแดง (5V Power):                                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ Type: Male-to-Male Jumper Wire                                      │    │
│  │ Color: 🔴 Red                                                       │    │
│  │ Length: 10-15 cm (ความยาวพอดี ไม่ยาวเกินไป)                        │    │
│  │ AWG: 22-24 (เส้นผ่านศูนย์กลางเหมาะสม)                               │    │
│  │ Quality: ตรวจสอบไม่ขาด ไม่หลวม                                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  สายดำ (GND):                                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ Type: Male-to-Male Jumper Wire                                      │    │
│  │ Color: ⚫ Black                                                      │    │
│  │ Length: 10-15 cm                                                    │    │
│  │ AWG: 22-24                                                          │    │
│  │ Quality: ตรวจสอบความต่อเนื่องด้วยมัลติมิเตอร์                        │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

🔧 เคล็ดลับการเลือกสาย:
✅ ใช้สายคุณภาพดี - ไม่หลวม ไม่ขาดง่าย
✅ ความยาวพอดี - ไม่ยาวเกินไปจนรกรุงรัง
✅ สีตามมาตรฐาน - แดง=บวก, ดำ=ลบ
✅ ตรวจสอบก่อนใช้ - วัดความต่อเนื่องด้วยมัลติมิเตอร์
```

```
Step 3: การเชื่อมต่อสายแดง (5V Power)
┌─────────────────────────────────────────────────────────────────────────────┐
│                           5V POWER CONNECTION                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  จุดเริ่มต้น: Power Module 5V Rail                                          │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. หาตำแหน่ง Rail A (5V) บน Power Module                            │    │
│  │ 2. เสียบสายแดงปลายที่ 1 เข้า Rail A                                  │    │
│  │ 3. กดให้แน่น ตรวจสอบไม่หลวม                                          │    │
│  │ 4. ดึงเบาๆ เพื่อทดสอบความแน่นหนา                                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                              🔴                                             │
│                              │ สายแดง                                      │
│                              ▼                                             │
│                                                                             │
│  จุดปลายทาง: ESP32 VIN Pin                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. ระบุตำแหน่ง VIN Pin บน ESP32 (Top Row, ด้านซ้ายสุด)              │    │
│  │ 2. เสียบสายแดงปลายที่ 2 เข้า VIN Pin                                 │    │
│  │ 3. กดให้แน่น ตรวจสอบการเชื่อมต่อ                                     │    │
│  │ 4. ตรวจสอบไม่สัมผัสกับ pin อื่น                                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

⚠️ ข้อควรระวัง:
❌ อย่าเสียบผิด pin - VIN อยู่ตำแหน่งซ้ายสุด Top Row
❌ อย่าใช้แรงเกินไป - อาจทำให้ pin งอหรือหัก
❌ อย่าสัมผัส pin อื่น - อาจทำให้เกิดไฟฟ้าลัดวงจร
✅ ตรวจสอบตำแหน่งให้ถูกต้อง - ดู pinout diagram
```

```
Step 4: การเชื่อมต่อสายดำ (GND)
┌─────────────────────────────────────────────────────────────────────────────┐
│                            GND CONNECTION                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  จุดเริ่มต้น: Power Module GND Rail                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. หาตำแหน่ง Rail B (GND) บน Power Module                            │    │
│  │ 2. เสียบสายดำปลายที่ 1 เข้า Rail B                                   │    │
│  │ 3. กดให้แน่น ตรวจสอบไม่หลวม                                          │    │
│  │ 4. ตรวจสอบไม่สัมผัสกับ Rail อื่น                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│                              ⚫                                             │
│                              │ สายดำ                                       │
│                              ▼                                             │
│                                                                             │
│  จุดปลายทาง: ESP32 GND Pin                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ ESP32 มี GND Pin หลายตำแหน่ง:                                        │    │
│  │ - Top Row: ตำแหน่งที่ 2 จากซ้าย (ข้าง VIN)                           │    │
│  │ - Bottom Row: ตำแหน่งที่ 2 จากซ้าย (ข้าง 3V3)                        │    │
│  │                                                                     │    │
│  │ เลือกใช้: Top Row GND (ใกล้กับ VIN)                                  │    │
│  │ 1. เสียบสายดำปลายที่ 2 เข้า GND Pin                                  │    │
│  │ 2. กดให้แน่น ตรวจสอบการเชื่อมต่อ                                     │    │
│  │ 3. ตรวจสอบไม่สัมผัสกับ VIN Pin                                        │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

💡 ทำไมใช้ Top Row GND:
✅ ใกล้กับ VIN Pin - สายสั้น เป็นระเบียบ
✅ ลด Ground Loop - การต่อกราวด์ที่เดียวกัน
✅ ง่ายต่อการตรวจสอบ - เห็นการเชื่อมต่อชัดเจน
✅ ตามมาตรฐาน - Power pins อยู่ด้วยกัน
```

```
Step 5: การตรวจสอบการเชื่อมต่อ
┌─────────────────────────────────────────────────────────────────────────────┐
│                        CONNECTION VERIFICATION                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Visual Inspection (ตรวจสอบด้วยตา):                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ ✅ สายแดงต่อ: Power 5V Rail → ESP32 VIN                             │    │
│  │ ✅ สายดำต่อ: Power GND Rail → ESP32 GND                             │    │
│  │ ✅ สายไม่สัมผัสกัน: VIN และ GND ไม่ลัดวงจร                          │    │
│  │ ✅ การเชื่อมต่อแน่น: ดึงเบาๆ ไม่หลุด                                │    │
│  │ ✅ ตำแหน่งถูกต้อง: ตาม pinout diagram                               │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Multimeter Testing (ตรวจสอบด้วยมัลติมิเตอร์):                             │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. ตั้งมัลติมิเตอร์โหมด DC Voltage                                   │    │
│  │ 2. Probe แดง → ESP32 VIN Pin                                        │    │
│  │ 3. Probe ดำ → ESP32 GND Pin                                         │    │
│  │ 4. เปิดไฟ Jetson Nano                                               │    │
│  │ 5. อ่านค่าแรงดัน: ต้องได้ 4.8V - 5.2V                              │    │
│  │ 6. ถ้าค่าผิด: ปิดไฟทันที และตรวจสอบการต่อใหม่                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Continuity Testing (ตรวจสอบความต่อเนื่อง):                                │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. ปิดไฟทั้งระบบ                                                    │    │
│  │ 2. ตั้งมัลติมิเตอร์โหมด Continuity (♪)                              │    │
│  │ 3. ตรวจ 5V Path: Power 5V Rail ↔ ESP32 VIN                        │    │
│  │ 4. ตรวจ GND Path: Power GND Rail ↔ ESP32 GND                      │    │
│  │ 5. ต้องได้เสียงบี๊บ หรือค่า 0Ω                                       │    │
│  │ 6. ตรวจไม่มี Short: VIN ↔ GND ต้องไม่มีเสียงบี๊บ                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

```
Step 6: การทดสอบ ESP32 Power-On
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ESP32 POWER-ON TEST                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Power-On Sequence:                                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ 1. ตรวจสอบการเชื่อมต่อทั้งหมดอีกครั้ง                                │    │
│  │ 2. เปิดไฟ Jetson Nano                                               │    │
│  │ 3. รอ 2-3 วินาที ให้ระบบเสถียร                                      │    │
│  │ 4. สังเกต LED บน ESP32                                              │    │
│  │ 5. ตรวจสอบแรงดันที่ ESP32 VIN                                        │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Expected Results (ผลลัพธ์ที่คาดหวัง):                                      │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ ✅ Jetson Nano: LED สีเขียวติด                                      │    │
│  │ ✅ Power Module: LED สีเขียวติด                                      │    │
│  │ ✅ ESP32: LED สีน้ำเงินติด (Power LED)                               │    │
│  │ ✅ ESP32 VIN: แรงดัน 4.8V - 5.2V                                    │    │
│  │ ✅ ESP32 3V3: แรงดัน 3.2V - 3.4V (ออกจาก LDO)                      │    │
│  │ ✅ ไม่มีเสียงผิดปกติ                                                 │    │
│  │ ✅ ไม่มีกลิ่นไหม้                                                    │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  Troubleshooting (แก้ปัญหา):                                               │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │ ❌ ESP32 LED ไม่ติด:                                                │    │
│  │    - ตรวจสาย VIN และ GND                                            │    │
│  │    - ตรวจแรงดันที่ VIN Pin                                           │    │
│  │    - ลองเปลี่ยนสายจัมเปอร์                                          │    │
│  │                                                                     │    │
│  │ ❌ แรงดันผิดปกติ:                                                   │    │
│  │    - ตรวจ Power Module เสียหรือไม่                                   │    │
│  │    - ตรวจการต่อจาก Jetson                                           │    │
│  │    - ตรวจ ESP32 เสียหรือไม่                                         │    │
│  │                                                                     │    │
│  │ ❌ มีกลิ่นไหม้:                                                     │    │
│  │    - ปิดไฟทันที!                                                    │    │
│  │    - ตรวจการลัดวงจร                                                 │    │
│  │    - เปลี่ยนชิ้นส่วนที่เสียหาย                                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📐 การประกอบแบบทีละขั้นตอนพร้อมภาพ

### 🛠️ เตรียมความพร้อม

#### ✅ **Checklist อุปกรณ์**
```
Hardware Components:
├── NVIDIA Jetson Nano + microSD (OS ติดตั้งแล้ว)
├── ESP32 Development Board (WROOM-32)
├── DHT22 Temperature/Humidity Sensor
├── MQ-135 Gas Sensor Module
├── PM2.5 Sensor Module
├── Breadboard Power Supply Module
├── Breadboard Half-size
├── Jumper Wires (M-M, M-F) - หลายสี
├── USB Cable (Micro USB to USB-A)
└── Resistor 10kΩ (optional)

Tools Required:
├── Multimeter (วัดแรงดัน/ความต่อเนื่อง)
├── Wire Strippers (คีมปอกสาย)
├── Small Screwdrivers (ไขควงเล็ก)
└── Anti-static Wrist Strap (สายรัดข้อมือกันไฟฟ้าสถิต)
```

---

### 🚀 **STEP 1: ติดตั้งระบบจ่ายไฟ**

#### Step 1.1: เตรียม Jetson Nano
```
📍 Jetson Nano Setup:
┌─────────────────────────────────┐
│         JETSON NANO             │
│  ┌─────────────────────────┐    │
│  │  1○ ○2  ← Pin 2 (5V)    │    │ ← ระบุตำแหน่ง
│  │  3○ ○4                  │    │
│  │  5○ ○6  ← Pin 6 (GND)   │    │ ← ระบุตำแหน่ง
│  │  ... (pins อื่นๆ)       │    │
│  └─────────────────────────┘    │
└─────────────────────────────────┘

🔍 ตรวจสอบ:
1. Jetson Nano เปิดเครื่องได้ปกติ
2. GPIO pins ไม่เสียหาย ไม่งอ
3. ระบุตำแหน่ง Pin 2 และ Pin 6 ชัดเจน
4. เตรียม keyboard, mouse, monitor พร้อม
```

#### Step 1.2: ติดตั้ง Power Supply Module
```
🔧 Power Module Installation:
            ┌─────────────────────────────────────┐
            │    Breadboard Power Supply Module   │
            │  ┌─────┐ ┌─────┐ ┌─────────────┐    │
            │  │ L D │ │●LED●│ │  USB PORT   │    │ ← LED สถานะ
            │  └─────┘ └─────┘ └─────────────┘    │
            │                                    │
            │  5V  OFF  3.3V    5V  OFF  3.3V    │ ← Output Rails
            │  ●    ●    ●      ●    ●    ●      │
            └─────────────────────────────────────┘
                            ▲
                            │ Power Input
                            
📋 ขั้นตอน:
1. วาง Breadboard บนพื้นผิวเรียบ
2. เสียบ Power Module เข้า Breadboard
   - ให้ส่วน Input อยู่ด้านซ้าย
   - ให้ Output Rails อยู่ด้านขวา
3. กดให้นั่งแน่น ไม่โยก
4. ระบุตำแหน่ง 5V, 3.3V, GND rails
```

#### Step 1.3: เชื่อมต่อไฟจาก Jetson
```
⚡ Power Connection:
    JETSON NANO                    POWER MODULE
   ┌─────────────┐               ┌─────────────┐
   │ Pin2(5V)    │──🔴 แดง ──────┤VIN          │
   │ Pin6(GND)   │──⚫ ดำ ────────┤GND          │
   └─────────────┘               └─────────────┘

🔧 ขั้นตอนการต่อ:
1. เตรียมสายจัมเปอร์:
   - สายแดง: ความยาว 10-15 cm
   - สายดำ: ความยาว 10-15 cm

2. เชื่อมต่อสายแดง:
   - ปลายหนึ่ง: Jetson Pin 2 (5V)
   - ปลายสอง: Power Module VIN (+)

3. เชื่อมต่อสายดำ:
   - ปลายหนึ่ง: Jetson Pin 6 (GND)  
   - ปลายสอง: Power Module GND (-)

4. ตรวจสอบ:
   - สายแดงต่อขั้วบวก (+)
   - สายดำต่อขั้วลบ (-)
   - การเชื่อมต่อแน่นหนา
```

#### Step 1.4: ทดสอบ Power Supply
```
🧪 Power Test:
1. เปิดเครื่อง Jetson Nano
2. ตรวจสอบ LED:
   - Jetson Nano: LED สีเขียวติด ✅
   - Power Module: LED สีเขียวติด ✅

3. วัดแรงดันด้วยมัลติมิเตอร์:
   📏 Voltage Check:
   ├── 5V Rail: 4.8V - 5.2V ✅
   ├── 3.3V Rail: 3.2V - 3.4V ✅
   └── GND: ความต่อเนื่อง ✅

4. ถ้าค่าผิดปกติ:
   - ปิดไฟทันที
   - ตรวจสอบการต่อสายใหม่
   - ตรวจสอบขั้วไฟไม่สลับ
```

---

### 🚀 **STEP 2: ติดตั้งและเชื่อมต่อ ESP32**

#### Step 2.1: เตรียม ESP32
```
📱 ESP32 Preparation:
                    ESP32 WROOM-32 Board
      ┌───────────────────────────────────────────────────┐
      │                                                   │
      │ VIN GND D13 D12 D14 D27 D26 D25 D33 D32 D35 D34  │ ← Top Pins
      │  ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   │
      │                                                   │
      │                    ESP32                          │
      │                  WROOM-32                         │
      │                                                   │
      │  ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   ○   │
      │ 3V3 GND D15 D2  D4 D16 D17 D5 D18 D19 D21 RX0   │ ← Bottom Pins
      │                ▲   ▲   ▲                         │
      │                │   │   │                         │
      │               DHT PM2.5 Sensor                   │
      └───────────────────────────────────────────────────┘

🔍 ระบุ Pins สำคัญ:
├── VIN: 5V Power Input (Top Row)
├── GND: Ground (Top & Bottom)
├── D4: DHT22 Data (Bottom Row)
├── D16: PM2.5 RXD (Bottom Row)
├── D17: PM2.5 TXD (Bottom Row)
├── D36: MQ-135 AOUT (Side Pin)
└── 3V3: 3.3V Output (Bottom Row)
```

#### Step 2.2: เชื่อมต่อไฟให้ ESP32
```
🔌 ESP32 Power Connections:
    POWER MODULE                   ESP32 BOARD
   ┌─────────────┐               ┌─────────────┐
   │ 5V Rail     │──🔴 แดง ──────┤VIN          │
   │ GND Rail    │──⚫ ดำ ────────┤GND          │
   └─────────────┘               └─────────────┘

📋 ขั้นตอน:
1. เตรียมสายจัมเปอร์:
   - สายแดง M-M: Power 5V → ESP32 VIN
   - สายดำ M-M: Power GND → ESP32 GND

2. การต่อสายแดง:
   - จาก: Power Module 5V Rail
   - ไป: ESP32 VIN (Top Row)

3. การต่อสายดำ:
   - จาก: Power Module GND Rail
   - ไป: ESP32 GND (Top หรือ Bottom)

⚠️ ข้อควรระวัง:
- ยังไม่เปิดไฟ รอให้ต่อครบก่อน
- ตรวจสอบขั้วไฟไม่สลับ
- สายต้องแน่นหนา ไม่หลวม
```

#### Step 2.3: เชื่อมต่อ USB Communication
```
💻 USB Setup:
    ESP32                          JETSON NANO
   ┌─────────────┐    USB Cable   ┌─────────────┐
   │ Micro USB   │◄──────────────►│ USB-A Port  │
   │ Port        │                │             │
   └─────────────┘                └─────────────┘

📋 ขั้นตอน:
1. เตรียมสาย USB (Micro USB to USB-A)
2. เสียบปลาย Micro USB เข้า ESP32
3. เสียบปลาย USB-A เข้า Jetson Nano
4. ตรวจสอบการเชื่อมต่อแน่นหนา
```

#### Step 2.4: ทดสอบ ESP32
```
🧪 ESP32 Test:
1. เปิดไฟ Jetson Nano
2. ตรวจสอบ LEDs:
   - Jetson: เขียว ✅
   - Power Module: เขียว ✅  
   - ESP32: น้ำเงิน ✅

3. ตรวจสอบ USB Detection:
   Terminal Command:
   ls /dev/ttyUSB* /dev/ttyACM*
   
   Expected Output:
   /dev/ttyUSB0 หรือ /dev/ttyACM0 ✅

4. ถ้าไม่ detect:
   - ตรวจสาย USB
   - ติดตั้ง driver: sudo apt install brltty
   - ลองพอร์ต USB อื่น
```

---

### 🚀 **STEP 3: เชื่อมต่อเซ็นเซอร์ DHT22**

#### Step 3.1: ระบุ DHT22 Pinout
```
🌡️ DHT22 Sensor (มองจากด้านหน้า):
┌─────────────────────┐
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐ │
│  │ 1 │ │ 2 │ │ 3 │ │ 4 │ │
│  └─┬─┘ └─┬─┘ └─┬─┘ └─┬─┘ │
└────┼─────┼─────┼─────┼───┘
     │     │     │     │
     │     │     │     └── Pin 4: GND (สายดำ)
     │     │     └──────── Pin 3: NC (ไม่ต่อ)
     │     └──────────── Pin 2: Data (สายเหลือง)
     └─────────────────── Pin 1: VCC (สายแดง)

📏 Pin Specifications:
├── Pin 1 (VCC): 3.3V-5V Power Input
├── Pin 2 (Data): Digital Data Signal
├── Pin 3 (NC): No Connection
└── Pin 4 (GND): Ground
```

#### Step 3.2: เชื่อมต่อ DHT22
```
🔗 DHT22 Wiring:
    DHT22 SENSOR                   CONNECTIONS
   ┌─────────────┐               
   │ Pin1 (VCC)  │──🔴 แดง ──────► Power 3.3V Rail
   │ Pin2 (Data) │──🟡 เหลือง ───► ESP32 GPIO4
   │ Pin3 (NC)   │   (ไม่ต่อ)
   │ Pin4 (GND)  │──⚫ ดำ ────────► Power GND Rail
   └─────────────┘

📋 ขั้นตอนการต่อ:
1. สายแดง (VCC):
   - จาก: DHT22 Pin 1
   - ไป: Power Module 3.3V Rail

2. สายเหลือง (Data):
   - จาก: DHT22 Pin 2  
   - ไป: ESP32 GPIO4 (Bottom Row)

3. Pin 3: ปล่อยว่าง (NC = No Connection)

4. สายดำ (GND):
   - จาก: DHT22 Pin 4
   - ไป: Power Module GND Rail
```

#### Step 3.3: เพิ่ม Pull-up Resistor (Optional)
```
📏 Pull-up Resistor Setup:
            10kΩ Resistor
    3.3V ────[10kΩ]──── GPIO4
     ▲                   ▲
     │                   │
   Power              DHT22 Data
   Rail               Signal

📋 ขั้นตอน (ทางเลือก):
1. เตรียมตัวต้านทาน 10kΩ
2. ขาหนึ่ง → Power 3.3V Rail  
3. ขาสอง → ESP32 GPIO4 (เส้นเดียวกับ DHT22)
4. ช่วยให้สัญญาณเสถียรขึ้น
```

#### Step 3.4: ทดสอบ DHT22
```
🧪 DHT22 Testing:
1. เปิดไฟระบบ
2. รอ 2-3 วินาทีให้เซ็นเซอร์เริ่มทำงาน
3. รันโค้ดทดสอบ:
   python3 -c "
   import Adafruit_DHT
   sensor = Adafruit_DHT.DHT22
   pin = 4
   humidity, temperature = Adafruit_DHT.read_retry(sensor, pin)
   print(f'Temp: {temperature:.1f}°C, Humidity: {humidity:.1f}%')
   "

4. ตรวจสอบผลลัพธ์:
   Expected: Temp: 25.4°C, Humidity: 65.2% ✅
   Error: None or NaN values ❌

5. ถ้าได้ค่า Error:
   - ตรวจสาย Data (เหลือง)
   - ตรวจแรงดัน VCC = 3.3V
   - เพิ่ม Pull-up resistor
   - ตรวจการต่อกราวด์
```

---

### 🚀 **STEP 4: เชื่อมต่อเซ็นเซอร์แก๊ส MQ-135**

#### Step 4.1: ระบุ MQ-135 Module
```
💨 MQ-135 Gas Sensor Module:
┌─────────────────────────┐
│    ┌─────────────────┐  │
│    │   Gas Sensor    │  │ ← ส่วนเซ็นเซอร์ (วงกลม)
│    │   (Circular)    │  │   อย่าสัมผัสโดยตรง
│    └─────────────────┘  │
│                         │
│  VCC GND AOUT DOUT     │ ← Pin Headers
│   │   │   │    │       │
└───┼───┼───┼────┼───────┘
    │   │   │    │
    │   │   │    └── DOUT: Digital Out (ไม่ใช้)
    │   │   └─────── AOUT: Analog Out (สายน้ำเงิน)
    │   └─────────── GND: Ground (สายดำ)
    └─────────────── VCC: Power 3.3V (สายแดง)

📏 Pin Specifications:
├── VCC: 3.3V-5V Power Input
├── GND: Ground Connection
├── AOUT: Analog Output (0-3.3V)
└── DOUT: Digital Output (ไม่ใช้ในโปรเจคนี้)
```

#### Step 4.2: เชื่อมต่อ MQ-135
```
🔗 MQ-135 Wiring:
    MQ-135 MODULE                  CONNECTIONS
   ┌─────────────┐               
   │ VCC         │──🔴 แดง ──────► Power 3.3V Rail
   │ GND         │──⚫ ดำ ────────► Power GND Rail  
   │ AOUT        │──🔵 น้ำเงิน ───► ESP32 GPIO36
   │ DOUT        │   (ไม่ต่อ)
   └─────────────┘

📋 ขั้นตอนการต่อ:
1. สายแดง (VCC):
   - จาก: MQ-135 VCC
   - ไป: Power Module 3.3V Rail

2. สายดำ (GND):
   - จาก: MQ-135 GND
   - ไป: Power Module GND Rail

3. สายน้ำเงิน (AOUT):
   - จาก: MQ-135 AOUT
   - ไป: ESP32 GPIO36 (Side Pin, Analog Input)

4. DOUT: ปล่อยว่าง (ไม่ต่อ)
```

#### Step 4.3: ข้อควรระวัง MQ-135
```
⚠️ MQ-135 Precautions:
🔥 เซ็นเซอร์จะร้อน:
├── ปกติที่เซ็นเซอร์ร้อนระหว่างใช้งาน
├── อย่าสัมผัสส่วนเซ็นเซอร์โดยตรง
├── ให้อากาศถ่ายเทรอบเซ็นเซอร์
└── หลีกเลี่ยงการติดตั้งในที่อับชื้น

⏰ เวลาอุ่นเครื่อง:
├── เซ็นเซอร์ใหม่: 24-48 ชั่วโมง (ความแม่นยำสูงสุด)
├── ใช้งานทั่วไป: 5-10 นาที (ค่าเบื้องต้น)
├── ค่าในช่วงแรกอาจไม่เสถียร
└── ค่าจะเสถียรขึ้นเมื่อใช้งานนานขึ้น
```

#### Step 4.4: ทดสอบ MQ-135
```
🧪 MQ-135 Testing:
1. เปิดไฟระบบ
2. รอ 5-10 นาทีให้เซ็นเซอร์อุ่นเครื่อง
3. รันโค้ดทดสอบ:
   python3 -c "
   import time
   import spidev
   # อ่านค่า ADC จาก GPIO36
   # ค่าจะอยู่ในช่วง 0-4095
   "

4. ตรวจสอบผลลัพธ์:
   Clean Air: 200-400 (ค่าต่ำ) ✅
   Polluted Air: 600-1000 (ค่าสูง) ✅
   No Reading: 0 หรือ 4095 ตลอด ❌

5. ถ้าค่าผิดปกติ:
   - รอให้อุ่นเครื่องนานขึ้น
   - ตรวจสาย AOUT (น้ำเงิน)
   - ตรวจแรงดัน VCC = 3.3V
   - ทดสอบในสภาพแวดล้อมต่างๆ
```

---

### 🚀 **STEP 5: เชื่อมต่อเซ็นเซอร์ PM2.5**

#### Step 5.1: ระบุ PM2.5 Sensor Pinout
```
🌫️ PM2.5 Sensor Module (จากรูปจริง):
┌─────────────────────────────────────┐
│         PM2.5 Sensor Module         │
│                                     │
│  TXD RXD GND 25μm 5V 1μm NC        │ ← Pin Headers
│   │   │   │   │   │  │   │         │
└───┼───┼───┼───┼───┼──┼───┼─────────┘
    │   │   │   │   │  │   │
    │   │   │   │   │  │   └── NC: No Connection
    │   │   │   │   │  └────── 1μm: ไม่ใช้งาน
    │   │   │   │   └───────── 5V: Power Input (สายแดง)
    │   │   │   └───────────── 25μm: ไม่ใช้งาน
    │   │   └───────────────── GND: Ground (สายดำ)
    │   └───────────────────── RXD: Receive Data (สายเขียว)
    └───────────────────────── TXD: Transmit Data (สายขาว)

📏 Pin Specifications:
├── TXD: Serial Transmit (ส่งข้อมูลจากเซ็นเซอร์)
├── RXD: Serial Receive (รับคำสั่งจาก ESP32)
├── GND: Ground Connection
├── 5V: 5V Power Input (ต้องใช้ 5V ไม่ใช่ 3.3V)
├── 25μm, 1μm, NC: ไม่ใช้งาน
└── Communication: UART Serial @ 9600 baud
```

#### Step 5.2: เชื่อมต่อ PM2.5 Sensor
```
🔗 PM2.5 Sensor Wiring:
    PM2.5 SENSOR                   CONNECTIONS
   ┌─────────────┐               
   │ TXD         │──⚪ ขาว ──────► ESP32 GPIO17 (UART2 RX)
   │ RXD         │──🟢 เขียว ────► ESP32 GPIO16 (UART2 TX)
   │ GND         │──⚫ ดำ ────────► Power GND Rail
   │ 5V          │──🔴 แดง ──────► Power 5V Rail
   │ 25μm,1μm,NC │   (ไม่ต่อ)
   └─────────────┘

📋 ขั้นตอนการต่อ:
1. สายแดง (5V):
   - จาก: PM2.5 Sensor 5V
   - ไป: Power Module 5V Rail
   ⚠️ ต้องใช้ 5V ไม่ใช่ 3.3V

2. สายดำ (GND):
   - จาก: PM2.5 Sensor GND
   - ไป: Power Module GND Rail

3. สายเขียว (RXD):
   - จาก: PM2.5 Sensor RXD
   - ไป: ESP32 GPIO16 (UART2 TX)

4. สายขาว (TXD):
   - จาก: PM2.5 Sensor TXD  
   - ไป: ESP32 GPIO17 (UART2 RX)

5. Pins อื่น: ปล่อยว่าง
```

#### Step 5.3: เข้าใจ UART Communication
```
📡 UART Serial Communication:
    ESP32                          PM2.5 SENSOR
   ┌─────────────┐               ┌─────────────┐
   │ GPIO16 (TX) │──────────────►│ RXD         │ Commands
   │ GPIO17 (RX) │◄──────────────│ TXD         │ Data
   └─────────────┘               └─────────────┘

🔄 Communication Flow:
1. ESP32 ส่งคำสั่ง → PM2.5 Sensor RXD
2. PM2.5 Sensor ส่งข้อมูล → ESP32 GPIO17
3. Baud Rate: 9600 bps
4. Data Format: 8N1 (8 data bits, No parity, 1 stop bit)

📊 Data Packet Format:
Header: AA C0 (2 bytes)
PM2.5:  XX XX (2 bytes, little-endian)
PM10:   XX XX (2 bytes, little-endian)  
ID:     XX XX (2 bytes)
Checksum: XX (1 byte)
Tail:   AB (1 byte)
Total: 10 bytes per packet
```

#### Step 5.4: ทดสอบ PM2.5 Sensor
```
🧪 PM2.5 Sensor Testing:
1. เปิดไฟระบบ
2. ตรวจสอบไฟเลี้ยง 5V ถูกต้อง
3. รันโค้ดทดสอบ Serial:
   python3 -c "
   import serial
   import time
   
   # เปิด Serial port
   ser = serial.Serial('/dev/ttyUSB0', 9600, timeout=1)
   
   # อ่านข้อมูล
   for i in range(10):
       data = ser.read(10)
       if len(data) == 10:
           pm25 = int.from_bytes(data[2:4], 'little') / 10
           pm10 = int.from_bytes(data[4:6], 'little') / 10
           print(f'PM2.5: {pm25} μg/m³, PM10: {pm10} μg/m³')
       time.sleep(1)
   "

4. ตรวจสอบผลลัพธ์:
   Normal Air: PM2.5: 5-25 μg/m³, PM10: 10-50 μg/m³ ✅
   No Data: ไม่มีข้อมูลหรือค่า 0 ตลอด ❌

5. ถ้าไม่มีข้อมูล:
   - ตรวจการต่อ RXD/TXD (อาจสลับกัน)
   - ตรวจแรงดัน 5V
   - ตรวจ Serial port detection
   - ลองสลับสาย GPIO16 และ GPIO17
```

### ขั้นตอนที่ 2: การเชื่อมต่อไฟและ USB ของ ESP32
```
                    บอร์ดพัฒนา ESP32
                  ┌─────────────────────────────┐
                  │                             │
           3V3 ○──┤                             ├──○ VIN ◄── 🔴 เรล 5V
           GND ○──┤                             ├──○ GND ◄── ⚫ เรล GND
            D15 ○──┤                             ├──○ D13
            D2  ○──┤                             ├──○ D12
            D4  ○──┤                             ├──○ D14
           D16  ○──┤                             ├──○ D27
           D17  ○──┤                             ├──○ D26
            D5  ○──┤                             ├──○ D25
           D18  ○──┤                             ├──○ D33
           D19  ○──┤                             ├──○ D32
           D21  ○──┤                             ├──○ D35
            D3  ○──┤                             ├──○ D34
            D1  ○──┤                             ├──○ VN
            D0  ○──┤                             ├──○ VP
           GND  ○──┤                             ├──○ D36
                  │         [พอร์ต USB]         │
                  └─────────────┬───────────────┘
                               │
                               │ สาย USB
                               ▼
                        พอร์ต USB ของ JETSON NANO
```

### ขั้นตอนที่ 3: เซ็นเซอร์อุณหภูมิ/ความชื้น DHT22
```
เซ็นเซอร์ DHT22 (มองจากด้านหน้า)
┌─────────────────────┐
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐    │
│  │1│ │2│ │3│ │4│    │
│  └┬┘ └┬┘ └┬┘ └┬┘    │
└───┼───┼───┼───┼─────┘
    │   │   │   │
    │   │   │   └── Pin 4: GND ──── ⚫ ดำ ──► เรล GND
    │   │   └────── Pin 3: NC (ไม่ต่อ)
    │   └────────── Pin 2: DATA ─── 🟡 เหลือง ─► ESP32 GPIO4
    └────────────── Pin 1: VCC ──── 🔴 แดง ────► เรล 3.3V

ทางเลือก: ตัวต้านทาน Pull-up 10kΩ
┌─────────────────────────────────────┐
│  เรล 3.3V ──[10kΩ]── DHT22 DATA    │
│             ตัวต้านทาน   (GPIO4)    │
└─────────────────────────────────────┘
```

### ขั้นตอนที่ 4: เซ็นเซอร์แก๊ส MQ-135
```
โมดูลเซ็นเซอร์แก๊ส MQ-135
┌─────────────────────────┐
│    ┌─────────────┐      │
│    │  เซ็นเซอร์   │      │
│    │  (กลม)      │      │
│    └─────────────┘      │
│                         │
│  VCC GND AOUT DOUT     │
│   │   │   │    │       │
└───┼───┼───┼────┼───────┘
    │   │   │    │
    │   │   │    └── DOUT: ไม่ต่อ
    │   │   └─────── AOUT ─── 🔵 น้ำเงิน ──► ESP32 GPIO36
    │   └─────────── GND ──── ⚫ ดำ ─► เรล GND
    └─────────────── VCC ──── 🔴 แดง ───► เรล 3.3V
```

### ขั้นตอนที่ 5: เซ็นเซอร์ฝุ่น PM2.5
```
โมดูลเซ็นเซอร์ PM2.5 (จากรูปที่เห็น)
┌─────────────────────────────┐
│     โมดูลเซ็นเซอร์ PM2.5     │
│                             │
│  TXD RXD GND 25μm 5V 1μm NC │
│   │   │   │   │   │  │   │  │
└───┼───┼───┼───┼───┼──┼───┼──┘
    │   │   │   │   │  │   │
    │   │   │   │   │  │   └── NC: ไม่ต่อ
    │   │   │   │   │  └────── 1μm: ไม่ต่อ
    │   │   │   │   └───────── 5V ──── 🔴 แดง ───► เรล 5V
    │   │   │   └───────────── 25μm: ไม่ต่อ
    │   │   └───────────────── GND ─── ⚫ ดำ ─► เรล GND
    │   └───────────────────── RXD ─── 🟢 เขียว ─► ESP32 GPIO16
    └───────────────────────── TXD ─── ⚪ ขาว ─► ESP32 GPIO17
```

---

### 🚀 **STEP 6: การตรวจสอบและทดสอบระบบทั้งหมด**

#### Step 6.1: ตรวจสอบการเชื่อมต่อทั้งหมด
```
✅ Complete Connection Checklist:

🔌 Power Connections:
├── Jetson Pin 2 (5V) → Power Module VIN ✓
├── Jetson Pin 6 (GND) → Power Module GND ✓
├── Power Module 5V → ESP32 VIN ✓
├── Power Module 3.3V → DHT22 VCC ✓
├── Power Module 3.3V → MQ-135 VCC ✓
├── Power Module 5V → PM2.5 Sensor 5V ✓
└── Power Module GND → All GND connections ✓

📡 Data Connections:
├── DHT22 Data → ESP32 GPIO4 (เหลือง) ✓
├── MQ-135 AOUT → ESP32 GPIO36 (น้ำเงิน) ✓  
├── PM2.5 RXD → ESP32 GPIO16 (เขียว) ✓
├── PM2.5 TXD → ESP32 GPIO17 (ขาว) ✓
└── ESP32 USB → Jetson USB ✓

⚠️ Unused Pins (ปล่อยว่าง):
├── DHT22 Pin 3 (NC)
├── MQ-135 DOUT
├── PM2.5: 25μm, 1μm, NC
└── ESP32: ขา pins อื่นๆ ที่ไม่ใช้
```

#### Step 6.2: ตรวจสอบแรงดันไฟฟ้า
```
📏 Voltage Verification:
    POWER RAILS MEASUREMENT
   ┌─────────────────────────┐
   │ 🔴 5V Rail              │ ← 4.8V - 5.2V ✅
   │ 🔴 3.3V Rail            │ ← 3.2V - 3.4V ✅
   │ ⚫ GND Rail             │ ← 0V Reference ✅
   └─────────────────────────┘

🔧 วิธีวัด:
1. ใช้มัลติมิเตอร์ตั้งโหมด DC Voltage
2. Probe สีแดง → Rails ที่จะวัด
3. Probe สีดำ → GND Rail
4. อ่านค่าแรงดัน:
   - 5V Rail: 4.8V - 5.2V ✅
   - 3.3V Rail: 3.2V - 3.4V ✅
   - ถ้าค่าผิด: ปิดไฟและตรวจสอบ
```

#### Step 6.3: ทดสอบ LED สถานะ
```
💡 LED Status Check:
    SYSTEM STATUS INDICATORS
   ┌─────────────────────────┐
   │ Jetson Nano: 🟢 Green   │ ← System Power ✅
   │ Power Module: 🟢 Green  │ ← Power Supply ✅
   │ ESP32: 🔵 Blue          │ ← ESP32 Power ✅
   └─────────────────────────┘

🔍 LED Meanings:
├── Jetson Green: ระบบ Jetson ทำงานปกติ
├── Power Green: โมดูลจ่ายไฟทำงานปกติ
├── ESP32 Blue: ESP32 ได้รับไฟและทำงาน
└── ถ้าไฟไม่ติด: ตรวจการต่อไฟทันที
```

#### Step 6.4: ทดสอบ USB Communication
```
💻 USB Detection Test:
Terminal Commands:
┌─────────────────────────────────────┐
│ $ ls /dev/ttyUSB* /dev/ttyACM*      │
│ Expected: /dev/ttyUSB0              │ ← ESP32 Detected ✅
│                                     │
│ $ dmesg | grep -i usb               │
│ Expected: USB device detected       │ ← USB Messages ✅
│                                     │
│ $ lsusb                             │
│ Expected: CP210x or CH340 device    │ ← USB Chip ✅
└─────────────────────────────────────┘

🔧 ถ้าไม่ detect:
1. ตรวจสาย USB
2. ลองพอร์ต USB อื่น
3. ติดตั้ง driver: sudo apt install brltty
4. รีบูต Jetson Nano
```

#### Step 6.5: รันโปรแกรมทดสอบเซ็นเซอร์
```
🧪 Full Sensor Test:
1. อัปโหลดโค้ดไป ESP32:
   - เปิด Arduino IDE
   - เลือกบอร์ด ESP32 Dev Module
   - เลือกพอร์ต /dev/ttyUSB0
   - อัปโหลด esp32_sensor_code.ino

2. รันโปรแกรม Python:
   cd /path/to/air_quality_ai
   python3 sensor_interface.py

3. ตรวจสอบข้อมูลที่ได้:
   Expected Output:
   ┌─────────────────────────────────────┐
   │ DHT22: Temp=25.4°C, Humidity=65.2% │ ✅
   │ MQ-135: Gas Level=150               │ ✅  
   │ PM2.5: 12.5 μg/m³, PM10=18.3 μg/m³ │ ✅
   │ Status: All sensors OK              │ ✅
   └─────────────────────────────────────┘
```

#### Step 6.6: การแก้ปัญหาเบื้องต้น
```
🔧 Troubleshooting Guide:

❌ DHT22 ไม่มีข้อมูล:
├── ตรวจสาย Data (เหลือง) → GPIO4
├── ตรวจแรงดัน VCC = 3.3V
├── เพิ่ม Pull-up resistor 10kΩ
└── ตรวจการต่อกราวด์

❌ MQ-135 ค่าไม่เปลี่ยน:
├── รอให้อุ่นเครื่อง 10-30 นาที
├── ตรวจสาย AOUT (น้ำเงิน) → GPIO36
├── ตรวจแรงดัน VCC = 3.3V
└── ทดสอบในสภาพแวดล้อมต่างๆ

❌ PM2.5 ไม่มีข้อมูล:
├── ตรวจแรงดัน = 5V (ไม่ใช่ 3.3V)
├── ตรวจการต่อ RXD/TXD อาจสลับกัน
├── ตรวจ Serial port /dev/ttyUSB0
└── ลองสลับสาย GPIO16 ↔ GPIO17

❌ ESP32 ไม่ detect:
├── เปลี่ยนสาย USB
├── ติดตั้ง driver: sudo apt install brltty
├── ลองพอร์ต USB อื่น
└── ตรวจสอบ ESP32 ไม่เสียหาย

❌ ไฟไม่ติด:
├── ตรวจการต่อไฟจาก Jetson
├── ตรวจขั้วไฟไม่สลับ (+ กับ -)
├── ตรวจสายไฟไม่ขาด
└── ตรวจ Power Module ไม่เสียหาย
```

---

### 🚀 **STEP 7: การใช้งานและบำรุงรักษา**

#### Step 7.1: การเริ่มต้นระบบ
```
🎮 System Startup Procedure:
1. เปิดไฟ Jetson Nano
2. รอให้ OS โหลดเสร็จ (2-3 นาที)
3. เชื่อมต่อ Network (Ethernet/WiFi)
4. รอให้เซ็นเซอร์อุ่นเครื่อง (5-10 นาที)
5. รันโปรแกรม Air Quality AI:
   cd /path/to/air_quality_ai
   python3 main.py

6. เข้าถึงเว็บไซต์:
   http://localhost:8050 (Local)
   http://[jetson-ip]:8050 (Network)
```

#### Step 7.2: การบำรุงรักษา
```
🔧 Maintenance Schedule:

รายสัปดาห์:
├── ตรวจสอบการเชื่อมต่อทั้งหมด
├── ทำความสะอาดเซ็นเซอร์ (เป่าลมเบาๆ)
├── ตรวจสอบไฟ LED สถานะ
└── Backup ข้อมูลที่บันทึก

รายเดือน:
├── ตรวจสอบแรงดันไฟฟ้า
├── ทำความสะอาด breadboard
├── ตรวจสอบสายไฟไม่หลวม
└── อัปเดต software

รายปี:
├── เปลี่ยนเซ็นเซอร์ (ถ้าจำเป็น)
├── Calibrate เซ็นเซอร์ใหม่
├── ตรวจสอบฮาร์ดแวร์ทั้งระบบ
└── อัปเกรด Jetson Nano OS
```

#### Step 7.3: การขยายระบบ
```
🚀 System Expansion Options:

เพิ่มเซ็นเซอร์:
├── CO2 Sensor → I2C (GPIO21, GPIO22)
├── Pressure Sensor → I2C หรือ SPI
├── Light Sensor → Analog (GPIO34, GPIO35)
└── Sound Sensor → Analog + Digital

เพิ่ม Output:
├── LCD Display → I2C (GPIO21, GPIO22)
├── OLED Display → I2C (GPIO21, GPIO22)  
├── Buzzer/Alarm → Digital (GPIO2, GPIO5)
└── LED Strip → PWM (GPIO25, GPIO26)

เพิ่ม Connectivity:
├── LoRa Module → SPI (GPIO12, GPIO13, GPIO14, GPIO15)
├── WiFi Hotspot → ESP32 built-in
├── Bluetooth → ESP32 built-in
└── SD Card Logging → SPI interface

เพิ่ม Power:
├── Battery Backup → UPS Module
├── Solar Panel → Charge Controller
├── Power Monitor → INA219 (I2C)
└── Remote Switch → Relay Module
```

---

## 📋 สรุปการประกอบทั้งหมด

### ✅ **Completion Checklist**
```
Hardware Assembly:
├── ✅ Jetson Nano + Power Supply Module
├── ✅ ESP32 + USB Communication
├── ✅ DHT22 Temperature/Humidity Sensor
├── ✅ MQ-135 Gas Sensor
├── ✅ PM2.5 Particulate Matter Sensor
└── ✅ All connections verified

Software Setup:
├── ✅ ESP32 firmware uploaded
├── ✅ Python dependencies installed
├── ✅ Sensor interface tested
├── ✅ Web dashboard running
└── ✅ Data logging active

Testing Results:
├── ✅ All sensors providing data
├── ✅ Values within expected ranges
├── ✅ System running stable
├── ✅ Web interface accessible
└── ✅ No error messages
```

### 🎯 **Expected Performance**
```
Sensor Accuracy:
├── DHT22: ±0.5°C (temp), ±2% (humidity)
├── MQ-135: Qualitative air quality indication  
├── PM2.5: ±10% (typical conditions)
└── Update Rate: Every 30 seconds

System Performance:
├── Boot Time: 2-3 minutes
├── Response Time: < 1 second
├── Uptime: 24/7 continuous operation
├── Power Consumption: ~15W total
└── Network Access: Local + Remote

Data Features:
├── Real-time monitoring
├── Historical data logging
├── Trend analysis
├── Alert notifications
└── Export capabilities
```

---

**🎉 ยินดีด้วย! คุณได้ประกอบระบบ Air Quality AI เสร็จเรียบร้อยแล้ว**

**ระบบพร้อมใช้งานสำหรับตรวจวัดคุณภาพอากาศแบบ Real-time**
**พร้อม Web Dashboard และการบันทึกข้อมูลอัตโนมัติ**

*Complete Assembly Guide สำหรับ Air Quality AI Project*
*ขั้นตอนละเอียดพร้อมการแก้ปัญหา*
*อัปเดตล่าสุด: พฤศจิกายน 2024*

---

## 📋 รายการตรวจสอบการเชื่อมต่อ

### การเชื่อมต่อไฟฟ้า ✅
- [ ] **Jetson Pin 2** → **โมดูลจ่ายไฟ VIN** (🔴 สายแดง)
- [ ] **Jetson Pin 6** → **โมดูลจ่ายไฟ GND** (⚫ สายดำ)
- [ ] **โมดูลจ่ายไฟ 5V** → **ESP32 VIN** (🔴 สายแดง)
- [ ] **โมดูลจ่ายไฟ GND** → **ESP32 GND** (⚫ สายดำ)
- [ ] **โมดูลจ่ายไฟ 3.3V** → **DHT22 Pin 1** (🔴 สายแดง)
- [ ] **โมดูลจ่ายไฟ 3.3V** → **MQ-135 VCC** (🔴 สายแดง)
- [ ] **โมดูลจ่ายไฟ 5V** → **SDS011 Pin 1** (🔴 สายแดง)

### การเชื่อมต่อกราวด์ ✅
- [ ] **DHT22 Pin 4** → **เรล GND** (⚫ สายดำ)
- [ ] **MQ-135 GND** → **เรล GND** (⚫ สายดำ)
- [ ] **PM2.5 Sensor GND** → **เรล GND** (⚫ สายดำ)

### การเชื่อมต่อข้อมูล ✅
- [ ] **DHT22 Pin 2** → **ESP32 GPIO4** (🟡 สายเหลือง)
- [ ] **MQ-135 AOUT** → **ESP32 GPIO36** (🔵 สายน้ำเงิน)
- [ ] **PM2.5 Sensor RXD** → **ESP32 GPIO16** (🟢 สายเขียว)
- [ ] **PM2.5 Sensor TXD** → **ESP32 GPIO17** (⚪ สายขาว)

### การเชื่อมต่อ USB ✅
- [ ] **ESP32 Micro USB** → **Jetson Nano USB-A** (สาย USB)

---

## 🔍 คู่มือแก้ปัญหาแบบภาพ

### ไฟ LED ที่ต้องตรวจสอบ
```
✅ โมดูลจ่ายไฟ: ไฟ LED สีเขียวติด
✅ ESP32: ไฟ LED สีน้ำเงินติด (ไฟเลี้ยง)
✅ SDS011: พัดลมหมุน ไม่มีเสียงผิดปกติ
✅ Jetson Nano: ไฟ LED สีเขียวติด
```

### ข้อผิดพลาดในการต่อสายที่พบบ่อย
```
❌ ผิด: เชื่อมต่อ 5V เข้าเซ็นเซอร์ 3.3V โดยตรง
✅ ถูก: ใช้โมดูลจ่ายไฟลดแรงดัน

❌ ผิด: ต่อ RX/TX สลับกัน
✅ ถูก: SDS011 RX → ESP32 GPIO16, SDS011 TX → ESP32 GPIO17

❌ ผิด: ลืมต่อกราวด์
✅ ถูก: เซ็นเซอร์ทั้งหมดต้องใช้กราวด์ร่วมกัน

❌ ผิด: การเชื่อมต่อหลวม
✅ ถูก: ยึดการเชื่อมต่อสายไฟให้แน่นทั้งหมด
```

### เคล็ดลับการจัดการสายไฟ
```
🔧 ใช้สายไฟสีต่างกันสำหรับหน้าที่ต่างกัน
🔧 เก็บสายไฟเลี้ยงให้ห่างจากสายข้อมูล
🔧 ใช้เคเบิลไทเพื่อจัดระเบียบมัดสายไฟ
🔧 ติดป้ายการเชื่อมต่อเพื่อการบำรุงรักษาในอนาคต
🔧 เหลือสายไฟไว้บ้างเพื่อการเคลื่อนไหว/ปรับแต่ง
```

---

## 📏 คำแนะนำการจัดวางทางกายภาพ

### การจัดวางอุปกรณ์ที่เหมาะสม
```
    [JETSON NANO]
         │
         │ (สาย USB)
         ▼
    [บอร์ด ESP32]
         │
         │ (สายสั้น)
         ▼
  [โมดูลจ่ายไฟ]
         │
    ┌────┼────┐
    ▼    ▼    ▼
[DHT22][MQ135][SDS011]
```

### ข้อพิจารณาในการติดตั้ง
- **Jetson Nano**: ฐานที่มั่นคง ระบายอากาศดี
- **ESP32**: พอร์ต USB เข้าถึงได้ ห่างจากแหล่งความร้อน
- **โมดูลจ่ายไฟ**: ตำแหน่งกลาง เข้าถึงขั้วต่อได้ง่าย
- **เซ็นเซอร์**: 
  - DHT22: ห่างจากแหล่งความร้อน
  - MQ-135: อากาศถ่ายเทดี
  - SDS011: ติดตั้งแนวนอน อากาศไหลเวียนไม่มีสิ่งกีดขวาง

---

## 🛠️ เครื่องมือและวัสดุที่ต้องใช้

### เครื่องมือจำเป็น
- [ ] **คีมปอกสาย** (22-24 AWG)
- [ ] **ไขควงขนาดเล็ก** (หัวแฉกและหัวแบน)
- [ ] **มัลติมิเตอร์** (แรงดันและความต่อเนื่อง)
- [ ] **สายรัดข้อมือกันไฟฟ้าสถิต**
- [ ] **คีมปากแหลม**

### วัสดุสำหรับต่อสาย
- [ ] **สายจัมเปอร์** (ผู้ชาย-ผู้ชาย, ผู้ชาย-ผู้หญิง)
- [ ] **สายไฟแกนแข็ง** (22 AWG, หลายสี)
- [ ] **ท่อหดความร้อน** (เส้นผ่านศูนย์กลาง 2mm, 3mm)
- [ ] **เคเบิลไท** (ขนาดเล็ก, หลายสี)
- [ ] **เทปไฟฟ้า** (ดำ, สี)

### อุปกรณ์เสริม
- [ ] **ตัวต้านทาน 10kΩ** (DHT22 pull-up)
- [ ] **เบรดบอร์ด** (สำหรับต้นแบบ)
- [ ] **เพิร์ฟบอร์ด** (การติดตั้งถาวร)
- [ ] **กล่องครอบ** (ป้องกัน)

---

*คู่มือการต่อสายแบบภาพสำหรับโปรเจค Air Quality AI*
*ปฏิบัติตามรหัสสีอย่างเคร่งครัดเพื่อการแก้ปัญหาที่ง่าย*
*อัปเดตล่าสุด: พฤศจิกายน 2024*
